
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Book CRUD API -Test Report</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; 
               margin: 40px auto; max-width: 1000px; line-height: 1.6; color: #333; }
        .header { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        .stats { display: flex; gap: 20px; margin: 20px 0; }
        .stat-card { background: #fff; border: 1px solid #dee2e6; border-radius: 6px; 
                     padding: 15px; text-align: center; flex: 1; }
        .success { border-left: 4px solid #28a745; }
        .error { border-left: 4px solid #dc3545; }
        .warning { border-left: 4px solid #ffc107; }
        .failures { margin-top: 30px; }
        .failure-item { background: #f8d7da; border: 1px solid #f5c6cb; 
                       border-radius: 4px; padding: 15px; margin: 10px 0; }
        .timestamp { color: #6c757d; font-size: 14px; }
        h1, h2 { color: #495057; }
        .metric { font-size: 24px; font-weight: bold; margin: 5px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìä Book CRUD API - Test Report</h1>
        <p class="timestamp">Generated: 2025-10-11 12:11:24</p>
        <p>Simple, focused test results for  CRUD project</p>
    </div>

    <div class="stats">
        <div class="stat-card success">
            <div class="metric">37</div>
            <div>Passed</div>
        </div>
        <div class="stat-card error">
            <div class="metric">21</div>
            <div>Failed</div>
        </div>
        <div class="stat-card">
            <div class="metric">63.8%</div>
            <div>Success Rate</div>
        </div>
        <div class="stat-card warning">
            <div class="metric">33</div>
            <div>API Endpoints</div>
        </div>
    </div>

    
    <div class="stat-card warning" style="margin: 20px 0;">
        <h3>üìã Test Coverage</h3>
        <p><strong>0</strong> of <strong>44</strong> 
           test cases automated (0.0%)</p>
    </div>
    

    
    <div class="failures">
        <h2>‚ùå Failed Tests</h2>
        
        <div class="failure-item">
            <strong>Health check - DB down (must simulate by stopping DB before running)</strong><br>
            <em>DB down test not executed - DB appears up</em><br>
            <small>Database is up. To validate this test, stop PostgreSQL and re-run this request. Received status: 200</small>
        </div>
        
        <div class="failure-item">
            <strong>Fetch all books - empty DB (manual prepare: truncate book table)</strong><br>
            <em>Array empty as requested</em><br>
            <small>DB not empty. To validate this test truncate the book table before running.</small>
        </div>
        
        <div class="failure-item">
            <strong>Create - Valid book (positive)</strong><br>
            <em>Response is JSON and echoes fields</em><br>
            <small>expected { data: { cost: 49.99, ‚Ä¶(3) }, ‚Ä¶(1) } to have property 'publisher'</small>
        </div>
        
        <div class="failure-item">
            <strong>Create - Database constraint violation (duplicate name) - make name unique in DB before running</strong><br>
            <em>DB constraint test not validated</em><br>
            <small>Server did not return 400. Ensure DB uniqueness constraint is applied and re-run. Received: 201</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - Valid update existing record (uses {{created_book_id}})</strong><br>
            <em>Missing created_book_id</em><br>
            <small>created_book_id not set. Run Create (positive) first.</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - Valid update existing record (uses {{created_book_id}})</strong><br>
            <em>Expect 200 OK for successful update</em><br>
            <small>expected 404 to equal 200</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - Valid update existing record (uses {{created_book_id}})</strong><br>
            <em>Response mentions updated</em><br>
            <small>expected '{\n  "error": "resource not found"\n}‚Ä¶' to include 'update'</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - Missing field in update (publisher)</strong><br>
            <em>Expect 400 when required publisher missing</em><br>
            <small>expected 404 to equal 400</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - Missing field in update (publisher)</strong><br>
            <em>Error mentions publisher</em><br>
            <small>expected '{"error":"resource not found"}' to include 'publisher'</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - Invalid date in update</strong><br>
            <em>Expect 400 for invalid date</em><br>
            <small>expected 404 to equal 400</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - Invalid date in update</strong><br>
            <em>Error mentions date</em><br>
            <small>expected '{"error":"resource not found"}' to include 'date'</small>
        </div>
        
        <div class="failure-item">
            <strong>Update - DB down during update (stop DB before running)</strong><br>
            <em>DB down test not executed</em><br>
            <small>Database is up. Stop PostgreSQL and re-run request to validate 503. Got: 404</small>
        </div>
        
        <div class="failure-item">
            <strong>Delete - Valid book (uses {{created_book_id}})</strong><br>
            <em>Missing created_book_id</em><br>
            <small>created_book_id not set. Run Create (positive) first.</small>
        </div>
        
        <div class="failure-item">
            <strong>Delete - Valid book (uses {{created_book_id}})</strong><br>
            <em>Expect 200 OK for successful delete</em><br>
            <small>expected 404 to equal 200</small>
        </div>
        
        <div class="failure-item">
            <strong>Delete - Valid book (uses {{created_book_id}})</strong><br>
            <em>Response mentions deleted</em><br>
            <small>expected '{\n  "error": "resource not found"\n}‚Ä¶' to include 'deleted'</small>
        </div>
        
        <div class="failure-item">
            <strong>Delete - DB connection down (stop DB before running)</strong><br>
            <em>DB down test not executed</em><br>
            <small>Database is up. Stop PostgreSQL and re-run request to validate 503. Got: 404</small>
        </div>
        
        <div class="failure-item">
            <strong>DB connection failure - change env base_url to invalid host before running</strong><br>
            <em>DB connection failure not reproduced</em><br>
            <small>Expected 503 when DB host invalid. Ensure server is configured to use invalid DB host and re-run. Received: 200</small>
        </div>
        
        <div class="failure-item">
            <strong>Unhandled Python exception simulation (modify server route to raise Exception)</strong><br>
            <em>Expect 500 when server raises unhandled exception</em><br>
            <small>expected [ 500, 502, 503 ] to include 404</small>
        </div>
        
        <div class="failure-item">
            <strong>Invalid HTTP method - PATCH /create (expect 405)</strong><br>
            <em>Expect 405 or 404 for invalid method</em><br>
            <small>expected [ 404, 405 ] to include 500</small>
        </div>
        
        <div class="failure-item">
            <strong>Schema - Get all books (array of book objects)</strong><br>
            <em>Books response matches schema</em><br>
            <small>expected false to be true</small>
        </div>
        
        <div class="failure-item">
            <strong>Schema - Create book response (object)</strong><br>
            <em>Create response matches book schema</em><br>
            <small>expected false to be true</small>
        </div>
        
    </div>
    

    

    <hr style="margin: 40px 0;">
    <p style="text-align: center; color: #6c757d; font-size: 14px;">
        <em>Simple report generated by app_test_simple.py | Newman 58 assertions</em>
    </p>
</body>
</html>